<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link href="main.css" rel="stylesheet">
</head>

<body>

  <h4>Ï†àÏ£ºÏπ≠Ï∞¨Ïä§Ìã∞Ïª§üç∫</h4>
  <p>Ï¥ù <span class="count">0</span>Í∞ú</p>

  <main class="grid">
    <div class="grid-item"></div>
    <div class="grid-item"></div>
    <div class="grid-item"></div>
    <div class="grid-item"></div>
    <div class="grid-item"></div>
    <div class="grid-item"></div>
    <div class="grid-item"></div>
    <div class="grid-item"></div>
    <div class="grid-item"></div>
    <div class="grid-item"></div>
    <div class="grid-item"></div>
    <div class="grid-item"></div>
    <div class="grid-item"></div>
    <div class="grid-item"></div>
    <div class="grid-item"></div>
    <div class="grid-item"></div>
    <div class="grid-item"></div>
    <div class="grid-item"></div>
    <div class="grid-item"></div>
    <div class="grid-item"></div>
    <div class="grid-item"></div>
    <div class="grid-item"></div>
    <div class="grid-item"></div>
    <div class="grid-item"></div>
    <div class="grid-item"></div>
    <div class="grid-item"></div>
    <div class="grid-item"></div>
    <div class="grid-item"></div>
    <div class="grid-item"></div>
    <div class="grid-item"></div>
  </main>

  <button class="btn reset">Î¶¨ÏÖã</button>

  <script>
    const getRandomEmoji = () => {

      const emojis = ['üòÄ', 'üòÉ', 'üòÑ', 'üòÅ', 'üòÜ', 'üòÖ', 'ü§£', 
      'üòÇ', 'üôÇ', 'üôÉ', 'üòâ', 'üòä', 'üòá', 'ü•∞', 'üòç', 'ü§©', 
      'üòò', 'üòó','üòã', 'üòõ', 'üòú', 'ü§™', 'üòù', 
      'ü§ë', 'ü§ó', 'ü§≠', 'ü§´', 'ü§ê', 'ü§®', 'üòê', 'üòë', 'üò∂', 
      'üòè', 'üòí', 'üôÑ', 'üò¨', 'üòÆ', 'ü§•', 'üòå', 'üòî', 'üò™', 
      'ü§§', 'üò¥', 'üò∑', 'ü§í', 'ü§ï', 'ü§Æ', 'ü§ß', 'ü•¥', 'üòµ', 'ü§Ø', 
      'ü§†', 'ü•≥','üòé', 'ü§ì', 'üßê', 'üòï', 'üòü', 'üôÅ', 'üòÆ', 'üòØ', 
      'üò≤', 'üò≥', 'ü•∫', 'üò¶', 'üòß', 'üò®', 'üò∞', 'üò•', 'üò¢', 'üò≠', 
      'üòñ', 'üò£', 'ü•±', 'üò§', 'üëª', 'üò∫', 'üò∏', 
      'üòπ', 'üòª', 'üòº', 'üòΩ', 'üôÄ', 'üòø', 'üòæ',
      'üíò','üíù','üíñ','üíó','üíì','üíû','üíï','üíü',
      'üíî','‚ù§','üß°','üíõ','üíö','üíô','üíú','ü§é','üñ§','ü§ç','üíØ',
      'üê∂','üêï','ü¶Æ','üêï‚Äçü¶∫','üê©','üê∫','ü¶ä','ü¶ù','üê±','üêà','ü¶Å',
      'üêØ','üêÖ','üêÜ','üê¥','üêé','ü¶Ñ','ü¶ì','ü¶å','üêÆ','üêÇ','üêÉ','üêÑ','üê∑']
      return emojis[~~(Math.random() * emojis.length)]
    } 
    //ÌéòÏù¥ÏßÄÎ°úÎìú
    if (localStorage.getItem('list') == null){
      localStorage.setItem('list', JSON.stringify([]))
    }

    //ÌéòÏù¥ÏßÄÎ°úÎìúÏãú DBÍ∫ºÎÇ¥ÏÑú ÎîîÏä§ÌîåÎ†àÏù¥
    let list = JSON.parse(localStorage.getItem('list'));
    list.forEach((a, i) => {
      document.querySelectorAll('.grid-item')[i].innerHTML = a;
    });

    //ÏàòÎüâÏπ¥Ïö¥Ìä∏
    document.querySelector('.count').innerHTML = list.length;
    
    let grid = document.querySelectorAll('.grid-item');
    

    for (let i = 0; i < grid.length; i++){
    
    document.querySelectorAll('.grid-item')[i].addEventListener('click', function(){
      
      if (document.querySelectorAll('.grid-item')[i].innerHTML != ''){
        list.splice(i, 1);
        document.querySelector('.count').innerHTML = list.length;
        
        //clear
        grid.forEach((a,i)=>{
          grid[i].innerHTML = ''
        });
        grid.forEach((a, j) => {
          if (list[j] != undefined) {
            document.querySelectorAll('.grid-item')[j].innerHTML = '<span>' + list[j] + '</span>';
          }
        });
        localStorage.setItem('list', JSON.stringify(list)); 
        return;
      }
      
      let result = confirm("Ï†àÏ£ºÌñàÎÇòÏöî?");
      if (result == true) {
        list = JSON.parse(localStorage.getItem('list'));
        list.push(getRandomEmoji());
        document.querySelector('.count').innerHTML = list.length;


        grid.forEach((a, j) => {
          if (list[j] != undefined) {
            document.querySelectorAll('.grid-item')[j].innerHTML = '<span>' + list[j] + '</span>';
          }
        });
        localStorage.setItem('list', JSON.stringify(list)); 
      }
      
    })

    }


    document.querySelector('.reset').addEventListener('click', function(){
      clearHTML();
      localStorage.setItem('list', JSON.stringify([])); 
    })



    function clearHTML (){
      let result = confirm("Î¶¨ÏÖãÌï†ÍπåÏöî?");
        if (result == true) {
        document.querySelector('.count').innerHTML = 0;
        grid.forEach((a,i)=>{
          grid[i].innerHTML = ''
        })
      }
    }

    
  </script>


</body>

</html>